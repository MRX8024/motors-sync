### 1. Установка скрипта калибровки на хост принтера. (последует перезагрузка клиппера!)

```
 cd ~
 git clone https://github.com/MRX8024/motors-sync
 bash ~/motors-sync/install.sh
```

2. Подключаем акселерометр как при измерении резонансов для input_shaper.
3. Добавляем в конфигурационный файл раздел, и частично настраиваем
   его для первого замера -
``` 
[motors_sync]
#accel_chip:
#    Aкселерометр для сбора вибраций adxl345 / mpu9250 / lis2dw и т.п.
#microsteps: 16
#    Максимальное дробление смещения ротора шагового двигателя, не стоит
#    повышать значение выше 16, делайте это на свой страх и риск.
#steps_threshold: 999999
#    Коэффициент кол-ва микрошагов смещения вала, зависящее от величины
#    отклонения (удара), настраивается эксперементальным путем. Допустим,
#    если удар у вас составил 50,000 единиц, а коэффициент равен 10,000 -
#    ШД совершит движение на 5 микрошагов заместо 1, для экономии времени.
#fast_threshold: 999999
#    Порог, до которого мотор не будет совершать угасающие колебания,
#    ради экономии времени, ввиду и так высоких отклонений. Будьте очень
#    осторожны уменьшая значение этого параметра.
#retry_tolerance: 999999
#    Принудительный порог, до которого пара шаговых двигателей должна 
#    будет опустить отклонения. После нескольких запусков калибровки,
#    вы найдете грань, до которой можно опустить этот параметр.
#retries: 0
#    Максимальное количество повторений для достижения принудительного
#    порога отклонений синхронизации моторов.
#respond: True
#    Вкл / выкл отладку промежуточных измерений.
```

4. Синхронизация моторов:

   Вводим команду `SYNC_MOTORS` в терминале, на главной странице веб
   интерфейса, и ждем завершения процесса.

   Некоторые параметры можно переопределять:
   ```
   SYNC_MOTORS [ACCEL_CHIP=<chip_name>] [STEPS_THRESHOLD=<value>]
   [FAST_THRESHOLD=<value>] [RETRY_TOLERANCE=<value>] [RETRIES=<value>]
   ```
   Для удобства настройки дополнительных параметров можно добавить макрос
   из `motors_sync.cfg` для получения физических кнопок\ячеек в интерфейсе.


5. Примечания:
    1. Не включайте нагрев хотенда во время синхронизации. Работающий
       вентилятор (в целом любой вентилятор в принтере) может помешать
       корректному и более точному измерению. Но если он уже включен,
       то постарайтесь не допускать его отключения посреди измерений.
    2. Синхронизацию возможно запустить в начале печати во время нагрева
       стола. Для этого нужно добавить ее в макрос \ слайсер. Например -
```
M140 S   ;set bed temp
SYNC_MOTORS
G28
M190 S   ; wait for bed temp to stabilize
M104 S   ;set extruder temp
BED_MESH_CALIBRATE
...
```
