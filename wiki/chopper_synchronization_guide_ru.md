Скрипт подстраивает положение вала на моторе X1/Y1 и с помощью акселерометра замеряет "удары" при подачи питания на мотор X/Y.

### 1. Установка скрипта калибровки на хост принтера. (последует перезагрузка клиппера!)
```
    cd ~
    git clone https://github.com/MRX8024/motors-sync
    bash ~/motors_sync/install.sh
```

2. Подключаем акселерометр как при измерении резонансов для input_shaper.
3. Добавляем в конфигурационный файл раздел -
```
[motors_sync]
accel_chip: adxl345
```
4. Синхронизация моторов:
   4. Запускаем команду `SYNC_MOTORS` в терминале, на главной странице веб интерфейса, и ждем завершения процесса.
 

5. Примечания:

    1. Синхронизация происходит с точностью 1/16 шага, более крупные значения мы не рекомендуем ставить.
    2. Не включайте нагрев хотенда во время синхронизации. Работающий вентилятор может помешать корректному и более точному измерению.
    3. Чем сильнее рассинхронизированы моторы, тем дольше длится синхронизация, однако скорость настраивается параметром `steps_threshold`, регулируйте его с умом.
    4. Синхронизацию возможно запустить в начале печати во время нагрева стола. Для этого нужно добавить ее в макрос \ слайсер. Например -
```
M140 S   ;set bed temp
SYNC_MOTORS
M190 S   ; wait for bed temp to stabilize
M104 S   ;set extruder temp
BED_MESH_CALIBRATE
...
```

Дополнительные параметры -

1. `accel_chip:` - акселерометр для сбора вибраций `adxl345 / mpu9250 / lis2dw` и т.п.
2. `microsteps: 16` - максимальное дробление смещения вала ротора шагового двигателя.
3. `steps_threshold: 100000` - коэффициент кол-ва микрошагов смещения вала, зависящее от величины отклонения (удара). Допустим, если удар у нас составил 50 000 единиц, а коэффициент равен 10 000, мотор совершит движение на 5 микрошагов.
4. `fast_threshold: 100000` - порог, до которого мотор не будет совершать угасающие колебания, ввиду и так высоких отклонений. `(0 - выкл)`
5. `force_threshold: 1000` - принудительный порог, до которого шаговый двигатель должен будет опустить отклонения, повторяя процедуру измерений n-ное кол-во раз, описывающееся следующим параметром.
6. `threshold_retries:` - максимальное количество повторений для достижения принудительного порога отклонений синхронизации моторов, превышая итерации - программа выдаст ошибку.
7. `respond: False` - вкл / выкл промежуточную отладку.

Так же некоторые параметры, можно переопределять при запуске команды:
```
SYNC_MOTORS AXIS=xy STEPS_THRESHOLD=100000 FAST_THRESHOLD=0 FORCE_THRESHOLD=0 THRESHOLD_RETRIES=0
```

